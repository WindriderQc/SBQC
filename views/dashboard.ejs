<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Data Farming App"> <meta name="author" content="SpecialBlend Production">
    <title>SBQC Server Dashboard</title>
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">

    <!-- Core CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <!-- MDB CSS (used by index.ejs via old head.ejs) -->
    <link rel="stylesheet" href="/css/mdb.min.css" />
    <!-- DataTables (used by dashboard.ejs)  needs jquery  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/2.1.8/js/dataTables.js" type="text/javascript" charset="utf8" ></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/2.1.8/css/dataTables.dataTables.css">
    
    <script src="https://cdn.jsdelivr.net/npm/moment@latest/moment.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-geo"></script>

    <%- include('partials/mainHead', { title: 'SBQC Server Dashboard' }) %>
</head>
<body class="light-grey">
<%- include('partials/miniNav') %> 

<div class="main" style="margin-left:300px;margin-top:43px;">

    <header class="container" style="padding-top:22px">
        <h5><b><i class="fa fa-dashboard"></i> My Dashboard</b></h5>
    </header>

    <div class="row-padding margin-bottom">
        <div class="col col-3">
            <div class="container green text-black padding-16 card-4">
                <div class="left"><i class="fa fa-comment xxxlarge"></i></div>
                <div class="right">
                <h3 id="msgCard"><%- collectionInfo.mews %>  </h3>
                </div>
                <div class="clear"></div>
                <h4>Messages</h4>
            </div>
        </div>
        <div class="col col-3">
            <div class="container indigo text-black padding-16 card-4">
                <div class="left"><i class="fa fa-eye xxxlarge"></i></div>
                <div class="right">
                <h3 id="viewsCard"><%- collectionInfo.userLogs %></h3>
                </div>
                <div class="clear"></div>
                <h4>Views</h4>
            </div>
        </div>
        <div class="col col-3">
            <div class="container khaki padding-16 card-4">
                <div class="left"><i class="fa fa-share-alt xxxlarge"></i></div>
                <div class="right">
                <h3 id="devicesCard"><%- collectionInfo.server %></h3>
                </div>
                <div class="clear"></div>
                <h4>Devices</h4>
            </div>
        </div>
        <div class="col col-3">
            <div class="container grey padding-16 card-4">
                <div class="left"><i class="fa fa-users xxxlarge"></i></div>
                <div class="right">
                <h3 id="usersCard"><%- collectionInfo.users %></h3>
                </div>
                <div class="clear"></div>
                <h4>Users</h4>
            </div>
        </div>
    </div>

    <div class="panel">
        <div class="row-padding">
        
            <div id="map" class="col col-12 col-l6 black card-2" >
                <h5>World</h5>
                <!--<img src="/img/region.jpg" style="width:100%" alt="Google Regional Map">-->
                <canvas id="worldMap" width="800" height="600"></canvas>
            
            </div>
    
        
            <div class="col col-12 col-l6 ">
                <h5>Feeds - hitcount:  <%- hitCount %></h5>

        

                <table class="table striped white">
                    <tr>
                        <td><i class="fa fa-user text-blue large"></i></td>
                        <td>New record, over 90 views.</td>
                        <td><i>10 mins</i></td>
                    </tr>
                    <tr>
                        <td><i class="fa fa-bell text-red large"></i></td>
                        <td>Database error.</td>
                        <td><i>15 mins</i></td>
                    </tr>
                    <tr>
                        <td><i class="fa fa-users text-yellow large"></i></td>
                        <td>New record, over 40 users.</td>
                        <td><i>17 mins</i></td>
                    </tr>
                    <tr>
                        <td><i class="fa fa-comment text-red large"></i></td>
                        <td>New comments.</td>
                        <td><i>25 mins</i></td>
                    </tr>
                    <tr>
                        <td><i class="fa fa-bookmark text-blue large"></i></td>
                        <td>Check transactions.</td>
                        <td><i>28 mins</i></td>
                    </tr>
                    <tr>
                        <td><i class="fa fa-laptop text-red large"></i></td>
                        <td>CPU overload.</td>
                        <td><i>35 mins</i></td>
                    </tr>
                    <tr>
                        <td><i class="fa fa-share-alt text-green large"></i></td>
                        <td>New shares.</td>
                        <td><i>39 mins</i></td>
                    </tr>
                </table>
        </div>
        </div>
    </div>
    <hr>
   
    <hr>

    <div class="container">
        <h5>TimeZone</h5>
        <div id="ip_id"></div>
        <br>
        <div>
            <label for="sourceSelect">Select Source:</label>
            <select id="sourceSelect">
                <% for (const collection in collectionInfo) { %>
                    <option value="<%= collection %>" <%= collection === 'userLogs' ? 'selected' : '' %>><%= collection.charAt(0).toUpperCase() + collection.slice(1) %> </option>
                <% } %>
            </select>
        </div>
        <div id="tableContainer">
            <hr />
            <h3>Server logs</h3>
            <table id="logsTable" class="display"> </table>
        </div>
        <div class='loading'>
            <img src='img/loading.gif' alt=''>
        </div>
    </div>


   

    <div class="row">

              

     </div>
    
     
    
  
<%- include('partials/miniFooter') %>
</div>


<script src="/js/tools.js"></script>
<script src="/js/dashboard.js"></script>




</body>
</html>
